<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>title</title>
	<link rel="stylesheet" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<script>
	var ytDownloader = require('../server.js');

	/*
	Called once the youtube search has finished.
	*/
	var searchCallback = function(songs) {
		for (var i = 0; i < ytDownloader.MAX_RESULTS; i++) {
    		$('#progress'+i).text(songs[i].title);
    	}; 
	};

	/*
	Trigger server side youtube search request.
	*/
	var search = function() {
		var artist = $('#search-box').val();
		ytDownloader.search(artist,searchCallback); 
	};

	/*
	Start the download process.
	*/
	var startDownloads = function() {
		ytDownloader.start($('#directory-path').text());
		activatePolling();
	};

	/*
	Check download progress.
	*/
	var activatePolling = function() {
		setInterval(function() { 
    		$.each(ytDownloader.progress, function( index, value ) {
    			$( "#progress" + index ).text(value);
    		});
    	}, 300);
	};

	/*
	Create DOM-Elements for the progress list and start polling.
	*/
	var init = function() {
		// Create progress list
    	for (var i = 0; i < ytDownloader.MAX_RESULTS; i++) {
    		var item = '<li '+'id="progress'+i+'">list element...</li>'; //You can add
    		$('#list').append(item);
    	};
 	};

 	/*
	Set download path via node-webkits directory dialog 'nwdirectory'.
 	*/
 	var chooseDirectory = function() {
		var directoryChooser = $('#download-path');
	    directoryChooser.change(function(evt) {
	      var value = $(this).val();
	      $('#directory-path').text(value);
	    });
	    directoryChooser.trigger('click');
	};

 	</script>

 </head>
 <body>

<div class="panel panel-default" style="width:800px;">
  <!-- Default panel contents -->
  <div class="panel-heading">
    <strong>Selected:</strong><br>
    <strong>Duration:</strong><br>
    <strong>Size:</strong>
      
</div>

      <!-- Table -->
<table class="table">
        <thead>
          <tr><th></th>
          <th>Title</th>
          <th><input type="checkbox"></th>
         
        </tr></thead>
        <tbody>
          <tr>
            <td><button type="button" class="btn btn-default btn-sm">
  <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
</button></td>
            
            <td>Rynerrr survival of the fittest LIVE</td>
            
            <th scope="row"><input type="checkbox"></th>
          </tr>
          <tr>
            <td><button type="button" class="btn btn-default btn-sm">
  <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
</button></td>
            
            <td>Rynerrr survival of the fittest LIVE</td>
            
            <th scope="row"><input type="checkbox"></th>
          </tr>
          <tr>
            <td><button type="button" class="btn btn-default btn-sm">
  <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
</button></td>
            
            <td>Rynerrr survival of the fittest LIVE</td>
            
            <th scope="row"><input type="checkbox"></th>
          </tr>


        </tbody>
      </table>
  <div class="panel-footer clearfix">
        <div class="pull-left">
            <a href="#" class="btn btn-primary">Download</a>
          	<a href="#" class="btn btn-default">Directory</a> No download path specified.
        </div>
    </div>
</div>
 


 	
 	<h1>Youtube MP3 Downloader</h1>
 	<!-- don't show default directory chooser, use custom html -->
 	<input style="display:none;" id="download-path" type="file" nwdirectory/>
 	<div><button id='directory'>choose download path</button><bold id="directory-path"> no path specified</bold></div>
 	
 	<input id ="search-box" type="text" name="search box">
 	<button id='search'>search</button>
 	<button id='download'>download</button>
	<ul id="list"></ul>

	<script>
	$( document ).ready(init);
	document.getElementById('directory').onclick = chooseDirectory;
 	document.getElementById('search').onclick = search;
 	document.getElementById('download').onclick = startDownloads;
	</script>
 </body>
 </html>